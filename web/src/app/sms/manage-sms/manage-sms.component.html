<app-nav-bar></app-nav-bar>

<div class="row m-b-20">
  <div class="col-md-6">
    <div class="card" [formGroup]="formGroup">
      <div class="card-body">
        <div class="row">
          <div class="col-12">
            <h5 class="d-inline">ส่ง SMS</h5>
            <b class="float-right"
              >เครดิตคงเหลือ : {{ credit | number: ".0" }}</b
            >
            <hr />
          </div>
          <div class="col-12 m-b-10">
            <div class="form-group">
              <label for="sender">ชื่อผู้ส่ง</label>
              <input
                class="form-control form-control-sm"
                [(ngModel)]="sender"
                formControlName="sender"
              />
            </div>
          </div>
          <div class="col-12 m-b-10">
            <div
              class="form-group"
              [ngClass]="{ 'is-invalid': f.tel.touched && f.tel.errors }"
            >
              <label for="tel">เบอร์โทรศัพท์ *</label>
              <ngx-tags-input
                class="form-control form-control-sm"
                id="tel"
                (onTagsChanged)="onTagsChanged($event)"
                [removeLastOnBackspace]="true"
                [(ngModel)]="data.tels"
                formControlName="tel"
                [displayField]="'value'"
                [minLengthBeforeOptions]="5"
              ></ngx-tags-input>
              <small class="poiter float-left text-info"
                >* กด Enter ทุกครั้งหลังใส่เบอร์โทรศัพท์เรียบร้อยแล้ว</small
              >
              <small
                class="poiter float-right text-danger"
                (click)="data.tels = []"
                >ล้างข้อมูล</small
              >
            </div>
          </div>
          <div class="col-12 m-b-20">
            <div
              class="form-group"
              [ngClass]="{
                'is-invalid': f.message.touched && f.message.errors
              }"
            >
              <label for="message">ข้อความ *</label>
              <textarea
                style="resize: none; height: 150px"
                autocomplete="off"
                maxlength="500"
                id="message"
                class="form-control form-control-sm"
                formControlName="message"
                [(ngModel)]="data.message"
              >
              </textarea>
              <small class="float-left"
                >จำนวน {{ data.tels.length | number: ".0" }} เบอร์</small
              >
              <small class="float-right">{{
                messageDisplay(data.message)
              }}</small>
            </div>
          </div>
          <div class="col-12 text-right m-b-10">
            <button
              id="btnSearch"
              type="button"
              class="btn btn-primary"
              (click)="sendSms()"
            >
              ส่งข้อความ
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col-12">
            <h5>นำเข้าเบอร์โทรศัพท์ด้วย Excel File</h5>
            * หากยังไม่มีเทมเพจให้
            <a
              href="https://prosalepage.com/assets/images/download/mobile-template.xlsx"
              target="_blank"
              class="text-info"
              >ดาวน์โหลดเทมเพจ</a
            >
            <hr />
          </div>
          <div class="col-12 m-b-20">
            <ng4-files-drop (filesSelect)="filesSelect($event)" mat-line>
              <ng4-files-click
                class="upload"
                (filesSelect)="filesSelect($event)"
              >
                <div class="upload-box">
                  <div class="upload-icon">
                    <i class="far fa-file-excel"></i>
                  </div>
                  <p>คลิก หรือ ลากวาง เพื่ออัพโหลด Excel</p>
                </div>
              </ng4-files-click>
            </ng4-files-drop>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>